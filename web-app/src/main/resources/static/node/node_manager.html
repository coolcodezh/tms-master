<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>节点管理</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
</head>
<body>

    <!-- 弹出的模态框 -->
  <div class="modal fade" id="myModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <!-- 头部 -->
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">新建节点信息</h4>
        </div>
        <!--身体 -->
        <div class="modal-body">
            <div>
                <fieldset>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">城市名称</label>
                            <div class="col-sm-5">
                                <!-- 此选择框的数据是要通过查询数据库的 -->
                                <select class="form-control" 
                                name="node_city_name" id="node_city_name">
                                     
                                </select>
                            </div>
                        </div>
    
                        <div class="form-group">
                            <label class="col-sm-2 control-label">机构</label>
                            <div class="col-sm-10">
                                <input type="text" id="node_org_name" name="node_org_name" style="background-color: darkgray;"  readonly>
                            </div>
                        </div>
     
                        <div class="form-group">
                            <label class="col-sm-2 control-label">节点类型</label>
                            <div class="col-sm-5">
                                <!-- 此选择框的数据是要通过查询数据库的 -->
                                <select class="form-control" name="node_type_1" id="node_type_1">
                                     
                                </select>
                            </div>
                        </div>
            
                        <div class="form-group">
                            <label class="col-sm-2 control-label">节点代码</label>
                            <div class="col-sm-10">
                                <input type="text" id="node_code" name="node_code"  >
                            </div>
                        </div>
    
                        <div class="form-group">
                            <label class="col-sm-2 control-label">节点名称</label>
                            <div class="col-sm-10">
                                <input type="text" id="node_name_1" name="node_name_1"  >
                            </div>
                        </div>
        
                        <div class="form-group">
                            <label class="col-sm-2 control-label">备注</label>
                            <div class="col-sm-10">
                                <textarea name="node_comments" 
                            id="node_comments" cols="60" rows="10"></textarea>
                            </div>
                        </div>
                    </form>
                </fieldset>
            </div>
        </div>

        

        <!--脚-->
        <div class="modal-footer">
            <button type="button" class="btn btn-primary">创建</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        </div>
      </div>
    </div>
  </div>

    <div>
        <span>所在城市</span>
        <select name="city_name" id="city_name">
            
        </select>
        <span>节点类型</span>
        <select name="node_type" id="node_type">
            
        </select>
        <span>节点名称</span>
        <input type="text" name="node_name" id="node_name">
        <button type="button">查询</button>
        <button type="button" class="btn btn-primary" 
        data-toggle="modal" data-target="#myModal" onclick="initCityAndType()">新建节点信息</button>
    </div>
    <hr>

    <div>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>操作</th>
                    <th>状态</th>
                    <th>城市代码</th>
                    <th>城市名称</th>
                    <th>机构名称</th>
                    <th>配送中心名称</th>
                    <th>节点类型</th>
                    <th>节点名称</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td>[<a href="#">修改</a>][<a href="#">作废</a>]</td>
                    <td>正常</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>已作废</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </div>
    <script src="/js/jquery-3.5.1.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>

        function initCityAndType() {
            console.log("页面加载完成")
            //页面加载完成后，需要将数据填入到下拉框（初始化下拉框数据）
            $.get("/data/tms_city.json", function(data){
                console.log(data)
                var citys = data.citys
                for(var i=0;i<citys.length;i++) {
                    let city = citys[i]
                    let opt = '<option value="'+city.id+'">'+city.cityName+'</option>'
                    $('#node_city_name').append(opt)
                }
            }, "json")

            $.get("/data/tms_node_type.json", function(data){
                console.log(data)
                var types = data.nodeType
                for(var i=0;i<types.length;i++) {
                    let type = types[i]
                    let opt = '<option value="'+type.id+'">'+type.name+'</option>'
                    $('#node_type_1').append(opt)
                }
            }, "json")
        }

        //页面加载完成之后将会触发onload事件
        window.onload = function() {

        }
        
        $(function(){
            console.log("页面加载完成")
            //页面加载完成后，需要将数据填入到下拉框（初始化下拉框数据）
            $.get("/data/tms_city.json", function(data){
                console.log(data)
                var citys = data.citys
                for(var i=0;i<citys.length;i++) {
                    let city = citys[i]
                    let opt = '<option value="'+city.id+'">'+city.cityName+'</option>'
                    $('#city_name').append(opt)
                }
            }, "json")

            $.get("/data/tms_node_type.json", function(data){
                console.log(data)
                var types = data.nodeType
                for(var i=0;i<types.length;i++) {
                    let type = types[i]
                    let opt = '<option value="'+type.id+'">'+type.name+'</option>'
                    $('#node_type').append(opt)
                }
            }, "json")

        })

    </script>
</body>
</html>